埋点过程
#### 产生阶段：
- 产运 
  根据业务场景 出埋点文档
- 数据
  - 埋点评审
  - 添加监控
    在埋点监控平台配置监控规则
    数据发到kafka后 按照配置的事件规则进行计算 并将结果保存带influxDB中 缓存的是7天的数据 但只能实时统计30min 此时可以拿到错误的数据
    在mysql表中只记录事件每小时的正确和错误条数 日增量为 400个 * 24h = 9600条，据此可以计算错误率、同比、周环比、环比等 

#### 开发阶段

#### 测试阶段
- 测试 
  数据是否符合预期

- 数据
  
  提供埋点监控平台 提供全量测试数据结果展示及正确率等指标

#### 维护阶段
- 数据
  
  负责埋点日常的监控和维护 如果有偶发的数据量激增或者减少要有报警

#### 下线阶段
  有的埋点用于业务的持续优化 一直做分析 比如曝光埋点
  
  有的埋点是版本迭代实验性的 可能会被遗弃
  
- 前端
  将埋点代码下掉
- 数据
  将该埋点状态改为失效

## 埋点的处理
  数据从kafka入仓到 小时分区的表 然后小时级别json解析得到全部事件的表 
  天级别解析得到单一事件表 
  对于一些埋点太多且业务集中的情况 可以将多个事件解析到一张表中 减少代码量

### 埋点分类
- 前端埋点 
    - 事件驱动  
      什么是事件  点击 浏览 停留 等等
      前端埋点通常带的信息比较丰富 但比较乱 存在埋不全 质量差

- 后端埋点 
    - 接口驱动  
      触发接口时 会带着数据 同时这些数据也可以在后端作为查询条件去关联其他业务表 或者落表

## 埋点学习
### 埋点是啥

用户行为数据采集 采集的数据常常用于分析 产品的使用情况 用户行为偏好 从而延伸出用户画像 用户推荐系统等数据产品
 
### 埋点流程

业务提出需求 产品经历将其整理为埋点需求文档
数据团队进行评审 评审通过与否 都要给相关人员发送需求评审纪要邮件 
评审通过后 产品跟开发工程师确定排期 并发送排期邮件
开发完成后 测试工程师 数据团队 产品经理 需要验证埋点是否完整且准确 提交验收报告
功能上线后 产品经理需要发送上线邮件


### 如何埋点
埋点应当包含哪些字段呢

    谁 什么时候 在哪里 具体行为 如何触发
    谁： 用户标识  设备ID用户id 账号id
    什么时候：服务器时间
    哪里 ip-gps-省市 + 产品的某个位置 按照层次或者深度 一级页面-二级页面-三级页面
    具体行为 比如浏览帖子 帖子相关信息如 id 分类  这个一般是可以按需增加或者减少
    什么动作触发的

除了这些 还有写公共字段  记录app或者浏览器的版本等



### 埋点为什么难做好 
     埋点整个实现的链路太长  一整套流程下来的, 需要相关平台以及部门作为支持
     
### 埋点的质量到底该谁负责
本着谁用谁负责, 数据要作为收口方,保证数据质量
     产品
     开发
     测试
     bi
     
     链路保障   

### 如何做好埋点
意识+规范+工具

 


