---
title: 分层、建模
---

### 分层
一般是分成4-5层
ods层
dwd层
dwm层
dws层
app层

ods和dwd 按照粒度(口径)组织 用于描述业务过程 如用户一次登陆行为
dws和app 按照维度组织 需要划分维度和指标
  dws层
    作为主题宽表 需要确认该主题的组织维度 后随业务发展扩宽指标 
    维度
      dws中应该有哪些维度呢？ 分析场景中where后面用哪些字段 
      维度一旦确认 不好改变 一定要慎重
    指标
      指标并不是一下就完成的 随着业务不断增多的 表也越来越宽
      指标须具体明确 避免相同指标定义多次 造成app层取数混乱 比如pc访问 total访问就没必要 因为可以得到
      维度是否退化成指标 作为筛选项 还是指标展示项 即在select后面还是where后面
        不是所有的纬度都能退化成指标。比如枚举值太多了。变化频率太高了
    dws层就是为了ads层取数方便 即只需要选取对应维度和指标 做聚合处理 针对不同场景
  app层
    根据特定应用场景 从dws层选取维度和指标 可能也做一些逻辑处理 为了app层好用
    app层作为最终的服务表 需要达到的效果是 只无脑取数 避免复杂逻辑加工 保证低延时和计算资源  



## 建模
  根据分析场景提炼维度和指标，后续涉及整合的过程

### 维度
  一般要保留最小粒度 满足多变的分析需求 如果做汇总可以单独加一个字段 一般处理用这个 特殊处理从细粒度得到
  具体的维度应该汇总成什么样 需要根据业务需求和实际分析效果

    用户维度是做相关维度分析的 可以看下每天活跃的人中 这部分占多少 具不具备分析要求 
  再有一些异常值 可以合并成一个 


### 指标
### 指标确定

  方针：谁用谁制定 使用效果(用的好用的多)是唯一评判标准 

    先要看业务方和雇主的需求是啥
    技术上确定: 品牌辐射 + 品牌吸引 = 曝光、点击+互动
    最后看 业务方和雇主什么反馈 满不满足需求 例如对于评论舆情的处理 目前暂时用不上

### 指标分级
- 不同人关注的指标级别不同
  上层角色 宏观指标 看重结果
  内部角色 微观指标 看重原因 便于归因落实 进而推导出todo 具有知道意义

一级 toVC      偏规模的指标 日活 营收 用户规模等
二级 toBOSS    推荐搜索中 ctr硬指标  留存率
三级 to部门     为达到二级指标 本部门能做哪些 具体的落地的  比如
四级 to落地团队  微观指标
五级 算法指标    哪个算法模块出现的问题  算法模块的输出效果的 量化指标  推荐策略的


拆解 量化 的过程
推荐 ctr 其他指标 在不同阶段 关注的不同

微观指标  宏观有些会关注不到 但微观会感知到 可能有收获

搜索
  不同阶段关注不同指标 开始关注某个指标 但单单关注某个的话 可能会畸形 或者描述的不够全面
  点击 停留时长 有无互动 有无其他功能的触达 
  有时为了做出特色功能 或者提升用户价值  重要指标稍微降低点也可以接受
推荐
  ctr 某一个指标无法完全去衡量整体效果
  垂直向的 深度的内容 时  ctr降点也没关系  